<?xml version="1.0"?>
<!DOCTYPE events>
<events version="1">
    <!-- This event is setup to repeat randomly every 1 to 4 months.
         How many months it takes before repeating is randomly chosen between min and max each time it triggers. -->
    <event repeat_months_min="1" repeat_months_max="4">
        <!-- Even though the event can repeat 1 to 4 months, we also have a time check here.
             This is checking that the months passed since the start of the game is equal or greater than a random number between 4 and 6.
             Once the scenario starts, this number will be determined (say it picks 5), and it will then start checking if that number of months have passed.
             Once met, this event can trigger and start repeating.
             
             So in total, this basically means: This event start after 4 to 6 months, and repeats every 1 to 4 months after that. -->
        <condition type="time" check="gte" min="4" max="6"/>
        <!-- Give the playre 1000 money -->
        <action type="money" min="1000" max="1000"/>
        <!-- Give the player 1 favor -->
        <action type="favor" amount="1"/>
    </event>
    <!-- This event is not setup to repeat, so it will only ever execute its actions once. -->
    <event>
		<!-- For the 'time' condition, we can do diffirent types of checks.
		Here we say that the months must exactly equal 0 (start of the game).
		We do this by using amount instead of a min and max.
        Using amount="0" is the same as saying min="0" and max="0" -->
        <condition type="time" check="eq" amount="0"/>
        <!-- We also only want this to fire if the player is playing on very easy -->
        <condition type="difficulty" check="eq" value="very_easy"/>
        <!-- We give the player an extra 10 favor -->
        <action type="favor" amount="10"/>
		<!-- Here we give the player a random amount of money between 10000 and 15000. -->
        <action type="money" min="10000" max="15000"/>
    </event>
    <event>
		<!-- On hard and very hard, we want to take some money and favour from the player at 
        the start of the scenario. -->
        <condition type="time" check="eq" amount="0"/>
        <condition type="difficulty" check="gte" value="hard"/>
        <action type="favor" amount="-7"/>
        <action type="money" min="-2735" max="-2735"/>
    </event>
    <event>
		<!-- If after a month you still do not have personal savings, then assume the player has their salary on 0.
        Secretly give them some personal savings to mess with them. -->
        <condition type="time" check="eq" amount="1"/>
        <condition type="savings" check="eq" value="0"/>
        <action type="savings" min="77" max="77"/>
    </event>
    <!-- Every month, if the player's city has less than 2000 money in its coffers, give money but reduce favour. -->
    <event repeat_months_min="1" repeat_months_max="1" max_number_of_repeats="2">
        <condition type="money" check="lte" value="0"/>
        <action type="money" amount="500"/>
        <action type="favor" amount="-5"/>
    </event>
    <!-- We want to wheat to start off expensive but slowly have its price return to normal to encourage the player to export wheat early on.
    So we do one event that runs at the start of the map to 'silently' increase the price, and then ... -->
    <event>
        <condition type="time" check="eq" amount="0"/>
        <action type="trade_price_adjust" resource="wheat" amount="40" show_message="false"/>
    </event>
    <!-- ... this second event runs randomly every (4 to 7) months while the wheat price is above 28, decreasing it by 2 each time. -->
    <event repeat_months_min="4" repeat_months_max="7">
        <condition type="trade_sell_price" resource="wheat" check="gte" value="28"/>
        <action type="trade_price_adjust" resource="wheat" amount="-2" show_message="true"/>
    </event>
    <!-- While Caesar loves us, and the trade price of wine is below 270, slowly increase it silently (no message shown) -->
    <event repeat_months_min="1" repeat_months_max="6">
        <condition type="stats_favor" check="gte" value="80"/>
        <condition type="trade_sell_price" resource="wine" check="lte" value="270"/>
        <action type="trade_price_adjust" resource="wine" amount="2" show_message="false"/>
    </event>
    <!-- The first time we have more than 10% unemployed people, we get land and sea trade problems that last 2 months each -->
    <event>
        <condition type="population_unemployed" percentage="true" check="gte" value="10"/>
        <action type="trade_problems_land" duration="32"/>
        <action type="trade_problems_sea" duration="32"/>
    </event>
    <!-- Once favour is greater or equal (gte) to 80, increase wheat demand for Heliopolis to 200.
	 Notes for this to work:
		Heliopolis must exist as a city on the empire map. (Custom empires are your friend.)
		Heliopolis must be trade-able. This trigger cannot change a city type between trade-able or not. Just adjust amounts.
		Heliopolis must buy wheat (if it sold it instead, then the amount would change how much it sells, not change it to buying.)
		In short, this works the same as demand changes that the editor can do,
			you can just now have as many as you want, and have conditions on them
	 -->
    <event>
        <condition type="stats_favor" check="gte" value="80"/>
        <action type="trade_route_amount" target_city="Heliopolis" resource="wheat" amount="200" show_message="true"/>
    </event>
    <!-- For the first two years Rome lowers wages consistently until it gets as low as 15. -->
    <event repeat_months_min="1" repeat_months_max="1">
        <condition type="time" check="lte" amount="24"/>
        <condition type="rome_wages" check="gte" value="15"/>
        <action type="rome_wages" min="-1" max="-1" set_to_value="false"/>
    </event>
    <!-- After two years, Rome's wages rises until it hits about 37. -->
    <event repeat_months_min="1" repeat_months_max="5">
        <condition type="time" check="gte" amount="24"/>
        <condition type="rome_wages" check="lte" value="37"/>
        <action type="rome_wages" min="1" max="5" set_to_value="false"/>
    </event>
    <!-- Once we have more than 1000 patricians, then we get start receiving some personal gifts. Totally legit. -->
    <event repeat_months_min="7" repeat_months_max="12">
        <condition type="city_population" check="gte" value="1000" class="patrician"/>
        <action type="savings" min="250" max="350"/>
    </event>
    <!-- Start a gladiator revolt after 36 months. -->
    <event>
        <condition type="time" check="eq" amount="36"/>
        <action type="gladiator_revolt"/>
    </event>
    <!-- At start of map, enable gold resource -->
    <event>
        <condition type="time" check="eq" amount="0"/>
        <action type="change_resource_produced" resource="gold" produced="true"/>
    </event>
    <!-- Disable plaza at the start of the game. Only enable it once the player has at least 4 working small temples -->
    <event>
        <condition type="time" check="eq" amount="0"/>
        <action type="change_allowed_buildings" building="plaza" allowed="false"/>
    </event>
    <event>
        <condition type="building_count_active" check="gte" value="4" building="all_small_temples"/>
        <action type="change_allowed_buildings" building="plaza" allowed="true"/>
    </event>
    <!-- If at least 4 months have passed, and you have no active small temples, then you get a 'gods are angry' message -->
    <event>
        <condition type="time" check="gte" amount="4"/>
        <condition type="building_count_active" check="lte" value="0" building="all_small_temples"/>
        <action type="send_standard_message" text_id="gods_wrathful"/>
    </event>
    <!-- After 12 to 16 months, start a plague -->
    <event>
        <condition type="time" check="gte" min="12" max="16"/>
        <action type="city_health" min="0" max="2" set_to_value="true"/>
    </event>
    <!-- The first time health drops below 10, send a message about pestilence -->
    <event>
        <condition type="stats_health" check="lte" value="10"/>
        <action type="send_standard_message" text_id="health_pestilence"/>
    </event>
    <!-- Somewhere after 3 to 7 months, set the sell price of pottery to 177. Normally sells for 140. Buy price will be automatically adjusted accordingly. -->
    <event>
        <condition type="time" check="eq" min="3" max="7"/>
        <action type="trade_price_set" resource="pottery" amount="177" set_buy_price="false" show_message="true"/>
    </event>
    <!-- Once the player has at least 10 soldiers, increase the price of weapons by 12 -->
    <event>
        <condition type="count_own_troops" check="gte" value="10" in_city_only="true"/>
        <action type="trade_price_adjust" resource="weapons" amount="12" show_message="true"/>
    </event>
    <!-- After 8 months a new trade route becomes available. -->
    <event>
        <condition type="time" check="eq" amount="8"/>
        <action type="empire_map_convert_future_trade_city" target_city="Ephesus" show_message="true"/>
    </event>
    <!-- After 2 months, force start the first request (which we will use as a repeating request).
        And about every 9 months, try and start the request again (will do nothing if already active.) -->
    <event repeat_months_min="7" repeat_months_max="11">
        <condition type="time" check="gte" amount="2"/>
        <action type="request_immediately_start" request_id="0"/>
    </event>
    <!-- For the second request, we want it to repeat immediately once it is completed,
        but only do so 4 times in total. So we run this event every month, and limit it to 4,
        but also only let it action if the request is not ongoing (otherwise it would count even the times
        it cannot properly start the request.) 
        
        Note: For an request like this that repeat quickly, you probably want the request itself to have
        a long leeway in its deadline, so that the player can leave it be for a bit and not get constant
        request spam. -->
    <event repeat_months_min="1" repeat_months_max="1" max_number_of_repeats="4">
        <condition type="request_is_ongoing" request_id="1" check_for_ongoing="false"/>
        <action type="request_immediately_start" request_id="1"/>
    </event>
</events>